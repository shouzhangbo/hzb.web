package com.test;

import javax.annotation.Resource;

import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.my.test.dao.BaseUserDao;
import com.my.test.dao.UserInfoDao;
import com.my.test.manage.TestService;


import org.apache.commons.httpclient.HttpClient; 
import org.apache.commons.httpclient.HttpMethod; 
import org.apache.commons.httpclient.HttpStatus; 
import org.apache.commons.httpclient.URIException; 
import org.apache.commons.httpclient.methods.GetMethod; 
import org.apache.commons.httpclient.methods.PostMethod; 
import org.apache.commons.httpclient.params.HttpMethodParams; 
import org.apache.commons.httpclient.util.URIUtil; 
import org.apache.commons.lang.StringUtils; 

//@ContextConfiguration(value = "classpath:spring/spring-config.xml")
@RunWith(SpringJUnit4ClassRunner.class)  //使用junit4进行测试  
@ContextConfiguration   
({"classpath:*.xml"}) //加载配置文件  
public class Test {

	@Resource
    private TestService testService;
	
	@org.junit.Test
    public void test(){
//		testService.test();
    }
	
	
	public static void get(String url, String queryString){
		String response = null; 
        HttpClient client = new HttpClient(); 
        HttpMethod method = new GetMethod(url); 
        try { 
        	method.setQueryString("UTF-8"); 
            client.executeMethod(method); 
            if(method.getStatusCode() == HttpStatus.SC_OK) { 
                response = method.getResponseBodyAsString(); 
                System.out.println("url="+url+"result="+response);
            } 
        } catch (Exception e) { 
        }  finally { 
                method.releaseConnection(); 
        } 
	}
	
	public static void main(String[] args) {
		for(int i=0;i<30;i++){
			new Thread(new Runnable() {
				@Override
				public void run() {
					long start = System.currentTimeMillis();
					System.out.println("开始执行线程="+Thread.currentThread().getName());
					get("http://localhost:8080/SpringMyBaties/test2.json","");
					System.out.println("线程="+Thread.currentThread().getName()+"，耗时="+(System.currentTimeMillis()-start));
				}
			}).start();
		}
	}
}
